CREATE TABLE IF NOT EXISTS ADVERTS
(
    ID           UUID      NOT NULL PRIMARY KEY,
    TYPE_REALTY  VARCHAR   NOT NULL,
    PUBLISHED_AT TIMESTAMP NOT NULL,
    EDITED_AT    TIMESTAMP NOT NULL,
    DESCRIPTION  VARCHAR   NOT NULL,
    FINAL_URL    VARCHAR   NOT NULL,
    STATUS       VARCHAR   NOT NULL CHECK (STATUS IN ('IN_USE', 'ARCHIVED', 'NOT_APPROVED')),
    PROPERTY_ID  UUID      NOT NULL,
    ADDRESS_ID   UUID      NOT NULL,
    SELLER_ID    UUID      NOT NULL,
    FOREIGN KEY (PROPERTY_ID) REFERENCES PROPERTY_BUILDING (ID),
    FOREIGN KEY (ADDRESS_ID) REFERENCES ADDRESS (ID),
    FOREIGN KEY (SELLER_ID) REFERENCES SELLER (ID)
);

CREATE TABLE IF NOT EXISTS ADDRESS
(
    ID              UUID    NOT NULL PRIMARY KEY,
    BUILD_MAP_TILER NUMERIC NOT NULL,
    DISTRICT        VARCHAR NOT NULL,
    ADDRESS_NAME    VARCHAR NOT NULL,
    CITY            VARCHAR NOT NULL,
    LATITUDE        NUMERIC NOT NULL,
    LONGITUDE       NUMERIC NOT NULL

);


CREATE TABLE IF NOT EXISTS AGENCY
(
    ID             UUID    NOT NULL PRIMARY KEY,
    AGENCY_NAME    VARCHAR NOT NULL,
    AGENCY_CATALOG VARCHAR NOT NULL
);

CREATE TABLE IF NOT EXISTS SELLER
(
    ID           UUID    NOT NULL PRIMARY KEY,
    NAME_OWNER   VARCHAR NOT NULL,
    TYPE_OWNER   VARCHAR NOT NULL,
    NUMBER_PHONE VARCHAR NOT NULL,
    AGENCY_ID    UUID    NOT NULL,
    FOREIGN KEY (AGENCY_ID) REFERENCES AGENCY (ID)
);


CREATE TABLE IF NOT EXISTS PROPERTY_BUILDING
(
    ID           UUID    NOT NULL PRIMARY KEY,
    SQUARE       NUMERIC NOT NULL,
    FLOOR        NUMERIC NOT NULL,
    ROOM         NUMERIC NOT NULL,
    REALTY_PRICE NUMERIC NOT NULL,
    ENERGY_PRICE NUMERIC NOT NULL,
    TOTAL_PRICE  NUMERIC NOT NULL,
    WITH_PETS    VARCHAR NOT NULL CHECK (WITH_PETS IN ('YES', 'NO', 'UNDEFINED')),
    WITH_KIDS    VARCHAR NOT NULL CHECK (WITH_KIDS IN ('YES', 'NO', 'UNDEFINED')),
    FOREIGN KEY (ID) REFERENCES ADVERTS (PROPERTY_ID)
);

CREATE TABLE IF NOT EXISTS FEATURES
(
    PROPERTY_ID UUID    NOT NULL,
    FEATURE     VARCHAR NOT NULL,
    FOREIGN KEY (PROPERTY_ID) REFERENCES PROPERTY_BUILDING (ID)
);

CREATE TABLE IF NOT EXISTS ADVANTAGES
(
    PROPERTY_ID UUID    NOT NULL,
    ADVANTAGE   VARCHAR NOT NULL,
    FOREIGN KEY (PROPERTY_ID) REFERENCES PROPERTY_BUILDING (ID)
);

CREATE TABLE IF NOT EXISTS IMAGES
(
    IMG_ID     UUID    NOT NULL PRIMARY KEY,
    ADVERTS_ID UUID    NOT NULL,
    IMAGE_URL  VARCHAR NOT NULL,
    FOREIGN KEY (ADVERTS_ID) REFERENCES ADVERTS (ID)
);



INSERT INTO ADDRESS (ID, BUILD_MAP_TILER, DISTRICT, ADDRESS_NAME, CITY, LATITUDE, LONGITUDE)
VALUES
    ('0', 179759043, 'Šváby', 'Mlynská 93', 'Prešov', 48.89474868774414, 21.67707633972168),
    ('1', 260371420, 'Záblatie', 'Partizánska 83', 'Trenčín', 48.881080627441406, 18.041723251342773);

INSERT INTO SELLER (ID, NAME_OWNER, TYPE_OWNER, NUMBER_PHONE, AGENCY_ID)
VALUES
    ('0', 'Owner Name', 'AGENCY', '+421900000000', '0'),
    ('1', 'Owner Name', 'AGENCY', '+421900000000', '1');

INSERT INTO PROPERTY_BUILDING (ID, SQUARE, FLOOR, ROOM, REALTY_PRICE, ENERGY_PRICE, TOTAL_PRICE, WITH_PETS, WITH_KIDS)
VALUES
    ('665475f366b2e18975f8df36', 117, 1, 2, 2308, 6634, 7040, 'NO', 'YES'),
    ('665475f366b2e18975f8df37', 110, 1, 8, 4815, 7522, 5736, 'NO', 'UNDEFINED');

INSERT INTO FEATURES (PROPERTY_ID, FEATURE)
VALUES
    ('665475f366b2e18975f8df36', 'Brick'),
    ('665475f366b2e18975f8df37', 'Steel');

INSERT INTO ADVANTAGES (PROPERTY_ID, ADVANTAGE)
VALUES
    ('665475f366b2e18975f8df36', 'CENTER'),
    ('665475f366b2e18975f8df36', 'CLOSE_BUS_STOP'),
    ('665475f366b2e18975f8df37', 'WITH_CHILD'),
    ('665475f366b2e18975f8df37', 'CENTER'),
    ('665475f366b2e18975f8df37', 'CLOSE_SUPERMARKET');

INSERT INTO IMAGES (IMG_ID, ADVERTS_ID, IMAGE_URL)
VALUES
    ('img1-665475f366b2e18975f8df36', '665475f366b2e18975f8df36', 'https://img.nehnutelnosti.sk/foto/L25laA==/WvJB1kyFw_fss?st=esFVXkcDOHnxsPaZhgHcChy2fHWCzA5SBrSU6qFJP2s&ts=1709444816&e=0'),
    ('img2-665475f366b2e18975f8df36', '665475f366b2e18975f8df36', 'https://img.nehnutelnosti.sk/foto/L25laA==/WvJB1kyFw_fss?st=esFVXkcDOHnxsPaZhgHcChy2fHWCzA5SBrSU6qFJP2s&ts=1709444816&e=0'),
    ('img1-665475f366b2e18975f8df37', '665475f366b2e18975f8df37', 'https://img.nehnutelnosti.sk/foto/L25laA==/WvJB1kyFw_fss?st=esFVXkcDOHnxsPaZhgHcChy2fHWCzA5SBrSU6qFJP2s&ts=1709444816&e=0'),
    ('img2-665475f366b2e18975f8df37', '665475f366b2e18975f8df37', 'https://img.nehnutelnosti.sk/foto/L25laA==/WvJB1kyFw_fss?st=esFVXkcDOHnxsPaZhgHcChy2fHWCzA5SBrSU6qFJP2s&ts=1709444816&e=0');






